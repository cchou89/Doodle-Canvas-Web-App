<% include ../partials/header %>
<div style="...">
    <h1>Create a Group</h1>
    <form action="/groups/new" method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label for="groupName">Group Name:
            <input type = 'text' id="groupName" name="groupName" placeholder="Group Name" required>
            </label>
        </div>
        <div class="form-group">
            <h2>Add Members</h2>
            <label for="member1">
                1:
                <input type="text" id="member1" name="member1" placeholder="Member">
            </label>

<!--            <label for="member2">-->
<!--                2:-->
<!--                <input type="text" id="member2" name="member2" placeholder="Member">-->
<!--            </label>-->

<!--            <label for="member3">-->
<!--                3:-->
<!--                <input type="text" id="member3" name="member3" placeholder="Member">-->
<!--            </label>-->

<!--            <label for="member4">-->
<!--                4:-->
<!--                <input type="text" id="member4" name="member4" placeholder="Member">-->
<!--            </label>-->

<!--            <label for="member5">-->
<!--                5:-->
<!--                <input type="text" id="member5" name="member5" placeholder="Member">-->
<!--            </label>-->

<!--            <button type="button" onclick="addMember()" class="addBtn">-->
<!--                Add-->
<!--            </button>-->
<!--            <button type="button" onclick="deleteMember()" class="delBtn">-->
<!--                Delete-->
<!--            </button>-->
            <ul id="memberList" name="memberList">
                <!--                    lists preexisting members in group-->
            </ul>
        </div>
        <div class="form-group">
            <button class="btn btn-lg btn-primary btn-block" >Submit!</button>
        </div>
    </form>
</div>

<script>
    var User = require('../../models/user');

    function addMember(){
        var memberToAdd = document.getElementById("member1");
        var newLine = document.createElement("LI");
        var value = document.createTextNode(memberToAdd.value);
        newLine.appendChild(value);
        document.getElementById("memberList").appendChild(newLine);
    }

    function deleteMember(){
        var toDelete = document.getElementById("memberList");
        toDelete.remove(toDelete.selectedIndex);
    }

    function search(){
        /*Searches for closest matches*/
        var input = document.getElementById('memberInput')
        if(input.value !== ""){
            var searchTerm = input.value;
            var query = User.find({name: searchTerm})
        }
    }

    function send(){
        var members = [];
        var memberList = document.getElementById('memberList')
        var added = memberList.children().length
        for (var i = 0; i<added;i++){
            members.push(memberList[i].innerHTML);
        }

        var toSend = {
            value: members
        }
        var toSend = new XMLHttpRequest()
        toSend.open('POST', '/new', true)
        toSend.setRequestHeader('Content-Type', 'application/json;charset=UTF-8')
        toSend.send(JSON.stringify(toSend))
    }
</script>
<% include ../partials/footer %>
