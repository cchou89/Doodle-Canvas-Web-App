<% include ../partials/header %>
<div style="...">
    <h1>Create a Group</h1>
    <form action="/groups/new" method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label for="groupName">Group Name:
            <input type = 'text' id="groupName" name="groupName" placeholder="Group Name" required>
            </label>
        </div>
        <div class="form-group">
            <label for="memberInput">
                Add Members:
                <input type="text" id="memberInput" name="memberInput" placeholder="Member" onchange="search()">
            </label>
            <button type="button" onclick="addMember()" class="addBtn">
                Add
            </button>
            <button type="button" onclick="deleteMember()" class="delBtn">
                Delete
            </button>
            <div id="myList" name="myList">
                <select id="memberList" name="memberList" size="10">
                    <!--Dynamically presents closest matches-->
                </select>
            </div>
        </div>
        <div class="form-group">
            <button class="btn btn-lg btn-primary btn-block">Submit!</button>
        </div>
    </form>
</div>

<script>
    var User = require('../../models/user');

    function addMember(){
        var memberToAdd = document.getElementById("memberInput");
        if(memberToAdd.value !== ""){
            var selectList = document.getElementById("memberList");
            var option = document.createElement("option");
            option.text = memberToAdd.value;
            selectList.add(option);
        }
    }
    function deleteMember(){
        var toDelete = document.getElementById("memberList");
        toDelete.remove(toDelete.selectedIndex);
    }

    function search(){
        /*Searches for closest matches*/
        var input = document.getElementById('memberInput')
        if(input.value !== ""){
            var searchTerm = input.value;
            var query = User.find({name: searchTerm})
        }
    }
</script>
<% include ../partials/footer %>
